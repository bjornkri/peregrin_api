#!/bin/sh

pdb_check=$(git grep -E -n '[ ;](i?pdb|breakpoint\()')
if [ ${#pdb_check} -gt 0 ]
then
        echo "==> ðŸš¨ðŸš¨ðŸš¨ COMMIT REJECTED: Breakpoints detected ðŸš¨ðŸš¨ðŸš¨"
        echo $pdb_check
        exit 1
else
        echo "==> âœ¨Code is clean of breakpointsâœ¨"
fi

# Magical git things!
. git-sh-setup

require_clean_work_tree push "==> ðŸš¨ðŸš¨ðŸš¨ Commit or stash your stuff and try again ðŸš¨ðŸš¨ðŸš¨"
echo "==> âœ¨Working tree is cleanâœ¨"

# Run tests and fail early.
./script/test -x
